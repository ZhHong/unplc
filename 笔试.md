*Version 0.1.0*
*Build by ZhouHong*

*Copyright © 2017 Chongqing LongMao Information Technology Co., Ltd. All rights reserved*

### 1 游戏服务器基本架构

* *(可参考 Appendix C)*

### 2 编程语言

* *(可参考 Appendix A)*
* 您熟悉/喜欢的编程语言，优点缺点。

### 3 数据结构与算法

* *(可参考 Appendix B)*
* 根据给定的随机配置给出随机算法。
	* 1，实现随机算法伪代码。
	* 2，复杂度计算。
	* 要求：
		* 概率要求平稳。
		* 不能超过最大命中次数。
		* 能干扰生成概率。*
* 概率配置

| 索引 | 随机值 | 概率 | 最大命中次数 | 当前命中次数 | 是否允许偏移|
|:---------:|:---------:|:--------:|:---------:|:---------:|:---------:|
|1|100000|0|-1|0|true|
|2|10000|0|-1|0|true|
|3|10000|0|-1|0|true|
|4|10000|0|-1|0|true|
|5|1000|0|-1|0|true|
|6|1000|0|20|0|false|
|7|1000|0|10|0|false|
|8|1000|0|5|0|false|
|9|100|0|2|0|false|
|10|50|0|1|0|false|

* 棋牌常见算法
	* 1，一副麻将，随机抽取十三张牌，判断出所有可以的操作(吃，碰，杠，胡)。
	* 2，复杂度计算。

### 4 数据库

* mysql脚本：

	``` sql
	CREATE TABLE IF NOT EXISTS `xxx_log` (
		`id` bigint(11) NOT NULL AUTO_INCREMENT,
		`user_id` int(11) NOT NULL,
		`event_type` int(11) NOT NULL,
		`from` int(11) NOT NULL DEFAULT 0,
		`to` int(11) NOT NULL DEFAULT 0,
		`change_value` int(11) NOT NULL,
		`now_value` int(11) NOT NULL,
		`last_insert_time` int(11) NOT NULL,
		PRIMARY KEY(`id`)
	) ENGINE=InnoDB AUTO_INCREMENT =1 DEFAULT CHARSET=utf8;
	//
	DROP PROCEDURE IF EXISTS server_update;
	CREATE PROCEDURE server_update()
	BEGIN
		DECLARE result int(4);
		DECLARE uDbName varchar(128);
		select database() into uDbName;
		SET result = 0;
		IF NOT EXISTS (select * from information_schema.columns where table_schema = uDbName and table_name = 'ingot_log' and column_name = 'gtype') THEN
			ALTER TABLE `xxx_log` ADD COLUMN  `gtype` varchar(16) DEFAULT '' AFTER `last_insert_time`;
		END IF;
		IF NOT EXISTS (select * from information_schema.columns where table_schema = uDbName and table_name = 'ingot_log' and column_name = 'platform') THEN
			ALTER TABLE `xxx_log` ADD COLUMN  `platform` varchar(64) DEFAULT '' AFTER `gtype`;
		END IF;
		IF NOT EXISTS (select * from information_schema.columns where table_schema = uDbName and table_name = 'ingot_log' and column_name = 'channel') THEN
			ALTER TABLE `xxx_log` ADD COLUMN  `channel` varchar(64) DEFAULT '' AFTER `platform`;
		END IF;
		SET result = 1;
		SELECT result;
	END;
	//

	CALL server_update();
	//

	DROP PROCEDURE IF EXISTS server_update;
	//

	DROP PROCEDURE IF EXISTS insert_xxx_log;
	CREATE PROCEDURE insert_xxx_log(
		IN in_user_id  int(11),
		IN in_from int(11),
		IN in_to int(11),
		IN in_event_type int(11),
		IN in_value int(11),
		IN in_then_value int(11),
		IN in_gtype varchar(64),
		IN in_platform varchar(64),
		IN in_channel  varchar(64)
	)
	BEGIN
		insert into xxx_log(user_id,`from`,`to`,event_type,change_value,now_value,last_insert_time,gtype,platform,channel) values(in_user_id,in_from,in_to,in_event_type,in_value,in_then_value,unix_timestamp(now()),in_gtype,in_platform,in_channel);
		select * from xxx_log where id = LAST_INSERT_ID();
	END;
	//
	```

* mongo脚本：

	``` shell
	```
